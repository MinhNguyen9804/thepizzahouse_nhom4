<header>
    <div class="header-top">
        <div class="logo-container">
            <img src="image_index/logo.jpg" alt="The Pizza House Logo">
            <h1>The Pizza House</h1>
        </div>
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Tìm kiếm món ăn..." onkeypress="handleSearch(event)">
        </div>
        <nav>
            <a href="index.html">Trang chủ</a>
            <a href="Menu/all.html">Thực đơn</a>
            <a href="#newaa">Đặt bàn</a>
            <div class="dropdown">
                <a href="Us/introduce.html">Chúng tôi</a>
                <ul class="dropdown-menu">
                    <li><a href="Us/introduce.html">Giới thiệu</a></li>
                    <li><a href="Us/news.html">Tin tức</a></li>
                    <li><a href="Us/policy.html">Điều khoản</a></li>
                    <li><a href="Us/contact.html">Liên hệ</a></li>
                </ul>
            </div>
        </nav>
        <div class="icons">
            <div class="account-dropdown">
                <a href="#" title="Tài khoản"><i class="fas fa-user"></i></a>
                <ul class="account-menu" id="accountMenu">
                    <li><a href="Account/login.html">Đăng nhập</a></li>
                    <li><a href="Account/register.html">Đăng ký</a></li>
                </ul>
            </div>
            <a href="cart.html" title="Giỏ hàng"><i class="fas fa-shopping-cart"></i></a>
            <span id="userName" style="display: none;"></span> <!-- Thêm tên đăng nhập -->
        </div>
    </div>
</header>
<script>
    // Hàm kiểm tra và hiển thị trạng thái đăng nhập
    function updateAccountStatus() {
        const storedUser = JSON.parse(localStorage.getItem("user"));
        const userName = document.getElementById("userName");
        const accountMenu = document.getElementById("accountMenu");

        if (storedUser && localStorage.getItem("remember") === "true") {
            // Đã đăng nhập
            const hoten = storedUser.hoten; // Sử dụng hoten thay vì email
            userName.textContent = hoten || "Người dùng"; // Hiển thị hoten, nếu không có thì dùng mặc định
            userName.style.display = "inline"; // Hiển thị tên
            accountMenu.innerHTML = `
                <li><a href="#" id="logoutLink">Đăng xuất</a></li>
            `;
        } else {
            // Chưa đăng nhập
            userName.textContent = "";
            userName.style.display = "none";
            accountMenu.innerHTML = `
                <li><a href="Account/login.html">Đăng nhập</a></li>
                <li><a href="Account/register.html">Đăng ký</a></li>
            `;
        }
    }

    // Gọi hàm khi trang tải
    document.addEventListener("DOMContentLoaded", updateAccountStatus);

    // Xử lý đăng xuất
    document.addEventListener("click", (e) => {
        if (e.target.id === "logoutLink") {
            e.preventDefault();
            localStorage.removeItem("user");
            localStorage.removeItem("remember");
            localStorage.removeItem("savedEmail");
            localStorage.removeItem("savedPassword");
            updateAccountStatus();
            alert("Đăng xuất thành công!");
        }
    });
</script>
